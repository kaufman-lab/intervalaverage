<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>isolate sections of overlapping intervals — isolateoverlaps • intervalaverage</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="isolate sections of overlapping intervals — isolateoverlaps"><meta property="og:description" content="Given a set of intervals in a table, isolate sections of intervals that are overlapping
with other in intervals (optionally, within groups). Returns a data.table that contains
intervals which are mutually non-overlapping or exactly overlapping with other intervals
(ie there are no partially overlapping intervals) (optionally within groups).
Note that this doesn't just return the intersects; the original interval data is conserved
such that for each interval/row in x, the return table has one or more
non-overlapping intervals that together form the union of that original interval."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">intervalaverage</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intervalaverage-advanced.html">Advanced Introduction to intervalaverage</a>
    </li>
    <li>
      <a href="../articles/intervalaverage-intro.html">Quick Introduction to intervalaverage</a>
    </li>
    <li>
      <a href="../articles/intervalaverage-technicaloverview.html">Technical overview of the intervalaverage function</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>isolate sections of overlapping intervals</h1>
    
    <div class="hidden name"><code>isolateoverlaps.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Given a set of intervals in a table, isolate sections of intervals that are overlapping
with other in intervals (optionally, within groups). Returns a data.table that contains
intervals which are mutually non-overlapping or exactly overlapping with other intervals
(ie there are no partially overlapping intervals) (optionally within groups).
Note that this doesn't just return the intersects; the original interval data is conserved
such that for each interval/row in x, the return table has one or more
non-overlapping intervals that together form the union of that original interval.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">isolateoverlaps</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">interval_vars</span>,</span>
<span>  group_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  interval_vars_out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"start"</span>, <span class="st">"end"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A data.table containing a set of intervals.</p></dd>


<dt>interval_vars</dt>
<dd><p>A length-2 character vector denoting column names in x.
these columns must be of the same class and be integer or IDate. The column name
specifying the lower-bound column must be specified first.</p></dd>


<dt>group_vars</dt>
<dd><p>NULL, or a character vector denoting column names in x.
These columns serve as grouping variables such that testing for overlaps and subsequent isolation only occur
within categories defined by the combination of the group variables.</p></dd>


<dt>interval_vars_out</dt>
<dd><p>The desired column names of the interval columns in the return data.table.
By default these columns will be generated to be named <code>c("start","end")</code>.
If x contains columns with the same name as the desired output column
names specified in <code>interval_vars_out</code>, the function will return in error to avoid naming
confusion in the return table.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data.table with columns <code>interval_vars_out</code> which denote the start and
stop period for each new interval. This return table also contains columns in x
(including the original interval columns).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>All intervals are treated as closed (ie inclusive of the start and end values in the columns
specified by interval_vars)</p>
<p>x is not copied but rather passed by reference to function internals
but the order of this data.tables is restored on function completion or error.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="is.overlapping.html">is.overlapping</a></code> To test if a table contains overlapping intervals within
values of <code>group_vars</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">23</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>addr_id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,each<span class="op">=</span><span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                exposure_start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">7L</span>,<span class="fl">14L</span><span class="op">)</span>,times<span class="op">=</span><span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>exposure_end<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7L</span>,<span class="fl">14L</span>,<span class="fl">21L</span><span class="op">)</span>,times<span class="op">=</span><span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>exposure_value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2z</span> <span class="op">&lt;-</span> <span class="fu">isolateoverlaps</span><span class="op">(</span><span class="va">x2</span>,interval_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exposure_start"</span>,<span class="st">"exposure_end"</span><span class="op">)</span>,group_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"addr_id"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2z</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     addr_id start end exposure_start exposure_end exposure_value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:       1     1   6              1            7     0.19321233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:       1     7   7              1            7     0.19321233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:       1     7   7              7           14    -0.43468211</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:       1     8  13              7           14    -0.43468211</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:       1    14  14              7           14    -0.43468211</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:       1    14  14             14           21     0.91326710</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:       1    15  21             14           21     0.91326710</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:       2     1   6              1            7     1.79338809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:       2     7   7              1            7     1.79338809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:       2     7   7              7           14     0.99660511</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:       2     8  13              7           14     0.99660511</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:       2    14  14              7           14     0.99660511</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:       2    14  14             14           21     1.10749049</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:       2    15  21             14           21     1.10749049</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:       3     1   6              1            7    -0.27808628</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:       3     7   7              1            7    -0.27808628</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:       3     7   7              7           14     1.01920549</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:       3     8  13              7           14     1.01920549</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:       3    14  14              7           14     1.01920549</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:       3    14  14             14           21     0.04543718</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:       3    15  21             14           21     0.04543718</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:       4     1   6              1            7     1.57577959</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:       4     7   7              1            7     1.57577959</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:       4     7   7              7           14     0.21828845</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25:       4     8  13              7           14     0.21828845</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26:       4    14  14              7           14     0.21828845</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27:       4    14  14             14           21    -1.04653534</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28:       4    15  21             14           21    -1.04653534</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     addr_id start end exposure_start exposure_end exposure_value</span>
<span class="r-in"><span><span class="co">#x2b represents x2 when where exposure values in overlapping intervals have been averaged</span></span></span>
<span class="r-in"><span><span class="va">x2b</span> <span class="op">&lt;-</span> <span class="va">x2z</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>exposure_value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">exposure_value</span><span class="op">)</span><span class="op">)</span>,by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"addr_id"</span>,<span class="st">"start"</span>,<span class="st">"end"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael Young.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>


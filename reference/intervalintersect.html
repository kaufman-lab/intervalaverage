<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Intersect intervals within groups — intervalintersect • intervalaverage</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Intersect intervals within groups — intervalintersect"><meta property="og:description" content="Given two tables each containing a set of intervals, find all interval intersections within groups.
Returns a data.table containing all columns from both tables.
One use of this function is to take a table  containing an address history
(a table containing the intervals when study participants lived at past addresses)
and join it to an exposure history table (a complete set of exposure predictions
for each address, where the exposures are stored as the average value over a
set of intervals) returning the set of
exposure intervals at addresses clipped to exactly when the participant lived at that address."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">intervalaverage</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intervalaverage-advanced.html">Advanced Introduction to intervalaverage</a>
    </li>
    <li>
      <a href="../articles/intervalaverage-intro.html">Quick Introduction to intervalaverage</a>
    </li>
    <li>
      <a href="../articles/intervalaverage-technicaloverview.html">Technical overview of the intervalaverage function</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Intersect intervals within groups</h1>
    
    <div class="hidden name"><code>intervalintersect.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Given two tables each containing a set of intervals, find all interval intersections within groups.
Returns a data.table containing all columns from both tables.
One use of this function is to take a table  containing an address history
(a table containing the intervals when study participants lived at past addresses)
and join it to an exposure history table (a complete set of exposure predictions
for each address, where the exposures are stored as the average value over a
set of intervals) returning the set of
exposure intervals at addresses clipped to exactly when the participant lived at that address.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">intervalintersect</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">interval_vars</span>,</span>
<span>  group_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  interval_vars_out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"start"</span>, <span class="st">"end"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A data.table with two columns defining closed intervals (see also interval_vars parameter)</p></dd>


<dt>y</dt>
<dd><p>A data.table with two columns defining closed intervals (see also interval_vars parameter)</p></dd>


<dt>interval_vars</dt>
<dd><p>Either a length-2 character vector denoting column names in both x and y or a named
length-2 character vector where the names are column names in x and the values are column names in y.
These column names specify columns in x and y that define
closed (inclusive) starting and ending intervals. The column name
specifying the lower-bound column must be specified first.
these columns in x and y must all be of the same class and either be integer or IDate.</p></dd>


<dt>group_vars</dt>
<dd><p>NULL, or either a character vector denoting the column name(s) in x and y,
or a named character vector where the name is the column name in x and the value is the column name in y.
This/these column(s) serve as an additional keying variable in the join (ie in addition to the interval join)
such that intervals in x will only be joined to overlapping in intervals in y where the group_vars values are the same.</p></dd>


<dt>interval_vars_out</dt>
<dd><p>The column names of the interval columns in the return data.table.
By default the return table will contain columns <code>c("start","end")</code>.
If your input tables already contain these columns,
you need to either specify <code>interval_vars_out</code> to be non-conflicting names with columns in x and y.
Or you rename columns in x and y to not contain columns named <code>c("start","end")</code>.</p></dd>


<dt>verbose</dt>
<dd><p>Prints additional information about the function processing.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data.table with columns <code>interval_vars_out</code> which denote the start and
stop period for each interval. This return table also contains columns in x and y. See details
for how naming conflicts are dealt with.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>All intervals are treated as closed (ie inclusive of the start and end values in the columns
specified by interval_vars)</p>
<p>x and y are not copied but rather passed by reference to function internals
but the order of these data.tables is restored on function completion or error,</p>
<p>Technically speaking this is just an inner cartesian join where the last two join variables are
doing a non-equi join for partial overlaps. Then each interval intersect is calculated using max and min.</p>
<p>If there are columns with the same names in both x and y (including interval_vars
but excepting group_vars), the return value will still return both columns. The column in y
will be names as it was originally and the column in x will be prepended with the letter i followed with a dot:
<code>i.</code> <br></p>
<p>Note that the function returns the same result if you switch x and y
(with the exception of switched column names in the case of column name conflicts as just discussed)</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="is.overlapping.html">is.overlapping</a></code> To test if a table contains overlapping intervals within values of <code>group_vars</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>addr_id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>ppt_id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>addr_start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">10L</span>,<span class="fl">12L</span>,<span class="fl">1L</span>,<span class="fl">1L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>addr_end<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9L</span>,<span class="fl">11L</span>,<span class="fl">14L</span>,<span class="fl">17L</span>,<span class="fl">10L</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>addr_id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,each<span class="op">=</span><span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>exposure_start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">8L</span>,<span class="fl">15L</span><span class="op">)</span>,times<span class="op">=</span><span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>exposure_end<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7L</span>,<span class="fl">14L</span>,<span class="fl">21L</span><span class="op">)</span>,times<span class="op">=</span><span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>exposure_value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">intervalintersect</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,</span></span>
<span class="r-in"><span>interval_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>exposure_start<span class="op">=</span><span class="st">"addr_start"</span>,exposure_end<span class="op">=</span><span class="st">"addr_end"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span><span class="st">"addr_id"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    addr_id start end exposure_value ppt_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       1     1   7     1.37095845      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:       1     8   9    -0.56469817      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:       2    10  11     0.40426832      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:       2    12  14     0.40426832      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:       3     1   7     1.51152200      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:       3     8  14    -0.09465904      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:       3    15  17     2.01842371      2</span>
<span class="r-in"><span><span class="va">y2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>addr_id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>ppt_id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>addr_start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">2L</span>,<span class="fl">3L</span>,<span class="fl">4L</span>,<span class="fl">1L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>addr_end<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9L</span>,<span class="fl">12L</span>,<span class="fl">13L</span>,<span class="fl">8L</span>,<span class="fl">10L</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#intervalintersect will still work when there are overlapping intervals within a table:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="is.overlapping.html">is.overlapping</a></span><span class="op">(</span><span class="va">y2</span>,interval_vars <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"addr_start"</span>,<span class="st">"addr_end"</span><span class="op">)</span> ,group_vars<span class="op">=</span><span class="st">"addr_id"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">intervalintersect</span><span class="op">(</span><span class="va">x</span>,<span class="va">y2</span>,</span></span>
<span class="r-in"><span>                 interval_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>exposure_start<span class="op">=</span><span class="st">"addr_start"</span>,exposure_end<span class="op">=</span><span class="st">"addr_end"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span><span class="st">"addr_id"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     addr_id start end exposure_value ppt_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:       1     1   7     1.37095845      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:       1     8   9    -0.56469817      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:       2     2   7     0.63286260      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:       2     3   7     0.63286260      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:       2     4   7     0.63286260      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:       2     8   8     0.40426832      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:       2     8  12     0.40426832      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:       2     8  13     0.40426832      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:       3     1   7     1.51152200      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:       3     8  10    -0.09465904      2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>addr_id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,each<span class="op">=</span><span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>exposure_start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">7L</span>,<span class="fl">14L</span><span class="op">)</span>,times<span class="op">=</span><span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                exposure_end<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7L</span>,<span class="fl">14L</span>,<span class="fl">21L</span><span class="op">)</span>,times<span class="op">=</span><span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>exposure_value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="is.overlapping.html">is.overlapping</a></span><span class="op">(</span><span class="va">x2</span>,interval_vars <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exposure_start"</span>,<span class="st">"exposure_end"</span><span class="op">)</span> ,group_vars<span class="op">=</span><span class="st">"addr_id"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">intervalintersect</span><span class="op">(</span><span class="va">x2</span>,<span class="va">y2</span>,</span></span>
<span class="r-in"><span>interval_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>exposure_start<span class="op">=</span><span class="st">"addr_start"</span>,exposure_end<span class="op">=</span><span class="st">"addr_end"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span><span class="st">"addr_id"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     addr_id start end exposure_value ppt_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:       1     1   7     -1.3888607      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:       1     7   9     -0.2787888      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:       2     2   7      0.6359504      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:       2     3   7      0.6359504      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:       2     4   7      0.6359504      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:       2     7   8     -0.2842529      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:       2     7  12     -0.2842529      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:       2     7  13     -0.2842529      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:       3     1   7     -2.4404669      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:       3     7  10      1.3201133      2</span>
<span class="r-in"><span><span class="co">#however, it may be meaningful isolate intervals of partial-overlap within</span></span></span>
<span class="r-in"><span><span class="co">#each table and deal with them</span></span></span>
<span class="r-in"><span><span class="co">#prior to intersecting the tables together:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x2z</span> <span class="op">&lt;-</span> <span class="fu"><a href="isolateoverlaps.html">isolateoverlaps</a></span><span class="op">(</span><span class="va">x2</span>,interval_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exposure_start"</span>,<span class="st">"exposure_end"</span><span class="op">)</span>,group_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"addr_id"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>interval_vars_out<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exposure_start2"</span>,<span class="st">"exposure_end2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x2b</span> <span class="op">&lt;-</span> <span class="va">x2z</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>exposure_value<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">exposure_value</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"addr_id"</span>,<span class="st">"exposure_start2"</span>,<span class="st">"exposure_end2"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">x2b</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exposure_start2"</span>,<span class="st">"exposure_end2"</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"exposure_start"</span>,<span class="st">"exposure_end"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y2z</span> <span class="op">&lt;-</span> <span class="fu"><a href="isolateoverlaps.html">isolateoverlaps</a></span><span class="op">(</span><span class="va">y2</span>,interval_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"addr_start"</span>,<span class="st">"addr_end"</span><span class="op">)</span>,group_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"addr_id"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>interval_vars_out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"addr_start2"</span>,<span class="st">"addr_end2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y2b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">y2z</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">addr_id</span>, <span class="va">ppt_id</span>,<span class="va">addr_start2</span>,<span class="va">addr_end2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">y2b</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"addr_start2"</span>,<span class="st">"addr_end2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"addr_start"</span>,<span class="st">"addr_end"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">intervalintersect</span><span class="op">(</span><span class="va">x2b</span>,<span class="va">y2b</span>,</span></span>
<span class="r-in"><span>interval_vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>exposure_start<span class="op">=</span><span class="st">"addr_start"</span>,exposure_end<span class="op">=</span><span class="st">"addr_end"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span><span class="st">"addr_id"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     addr_id start end exposure_value ppt_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:       1     1   6     -1.3888607      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:       1     7   7     -0.8338247      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:       1     8   9     -0.2787888      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:       2     2   2      0.6359504      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:       2     3   3      0.6359504      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:       2     4   6      0.6359504      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:       2     7   7      0.1758487      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:       2     8   8     -0.2842529      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:       2     9  12     -0.2842529      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:       2    13  13     -0.2842529      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:       3     1   6     -2.4404669      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:       3     7   7     -0.5601768      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:       3     8  10      1.3201133      2</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael Young.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>


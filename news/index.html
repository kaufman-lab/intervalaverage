<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • intervalaverage</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">intervalaverage</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intervalaverage-advanced.html">Introduction to intervalaverage</a>
    </li>
    <li>
      <a href="../articles/intervalaverage-intro.html">Introduction to `intervalaverage`</a>
    </li>
    <li>
      <a href="../articles/intervalaverage-technicaloverview.html">Technical overview of the intervalaverage function</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="0.9.0" id="intervalaverage-090-in-development">intervalaverage 0.9.0 (in development)<a class="anchor" aria-label="anchor" href="#intervalaverage-090-in-development"></a></h2>
<ol style="list-style-type: decimal"><li>is.overlapping: interval_vars now must be of class integer or IDate, consistent with the other functions in this package. Since other functions only deal with discrete data on closed intervals, it makes sense to keep this consistent with those other functions.</li></ol><p>is.overlapping should be much faster (and use less memory) in the cases where the dataset contains many overlaps.</p>
<ol start="2" style="list-style-type: decimal"><li><p>In intervalaverage, the internal test for overlaps is faster, so there’s less reason to specify skip_overlap_check ==TRUE</p></li>
<li><p>When dealing with data.table objects loaded from disk, is.overlapping and other functions could return confusing error messages (“all(required_columns %in% names(x)) is not TRUE”). These error messages are now more clear (coming directly from the data.table package) explainig that data.table objects loaded from disk need to have memory allocated explicitly first “Please run setDT() or setalloccol() on it first (to pre-allocate space for new columns) before assigning by reference to it.”).</p></li>
</ol></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.8.0" id="intervalaverage-080-release">intervalaverage 0.8.0 (Release)<small>2020-07-23</small><a class="anchor" aria-label="anchor" href="#intervalaverage-080-release"></a></h2>
<ol style="list-style-type: decimal"><li>No major changes from 0.0.0.9010 other than changing the readme to reflect that this may be soon downloadable from CRAN.</li></ol></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.0.9010" id="intervalaverage-0009010-development">intervalaverage 0.0.0.9010 (Development)<a class="anchor" aria-label="anchor" href="#intervalaverage-0009010-development"></a></h2>
<ol style="list-style-type: decimal"><li><p>Slight reversal to the breaking change before: I had forgotten I was already allowing different group_vars in x and y via providing named group_vars for intervalintersect so this functionality is turned back on. Naming either interval_vars or group_vars in the intervalintersect function is still explicitly disallowed since the functionality of allowing different join column names in x and y for that function is still not implemented.</p></li>
<li><p>Rewrote some internals of the intervalintersect function and added a few additional tests. This, combined with the major rewrite of the intervalaverage function in 9009, should hopefully resolve the memory issues that were occurring i386 windows during R CMD CHECK.</p></li>
</ol></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.0.9009" id="intervalaverage-0009009-development">intervalaverage 0.0.0.9009 (Development)<a class="anchor" aria-label="anchor" href="#intervalaverage-0009009-development"></a></h2>
<ol style="list-style-type: decimal"><li><p>POTENTIALLY BREAKING CHANGE: interval_vars and group_vars arguments cannot have names for the intervalaverage function. This is to allow for a future release where x and y could have differently named interval and/or grouping columns. Additionally, in the intervalintersect function group_vars cannot have names for the same reason. intervalintersect already allows for different interval_vars names in x and y via this exact scheme, so named interval_vars arguments to intervalintersect are obviously still allowed.</p></li>
<li><p>Turned off some tests when building on CRAN that are likely never going to pass on i386 due to memory issues with the slower non-exported testing/validation function (interval_average_slow_f).</p></li>
</ol></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.0.9008" id="intervalaverage-0009008-development">intervalaverage 0.0.0.9008 (Development)<a class="anchor" aria-label="anchor" href="#intervalaverage-0009008-development"></a></h2>
<ol style="list-style-type: decimal"><li>Optimized interval average for memory usage.</li></ol></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.0.9007" id="intervalaverage-0009007-development">intervalaverage 0.0.0.9007 (Development)<a class="anchor" aria-label="anchor" href="#intervalaverage-0009007-development"></a></h2>
<ol style="list-style-type: decimal"><li>Performance check is no longer tested on cran.</li></ol></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.0.9006" id="intervalaverage-0009006-development">intervalaverage 0.0.0.9006 (Development)<a class="anchor" aria-label="anchor" href="#intervalaverage-0009006-development"></a></h2>
<ol style="list-style-type: decimal"><li>A new unit test/regression test has been added to ensure that the function is using the optimal algorithm based on data.table performance.</li></ol></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.0.9005" id="intervalaverage-0009005-development">intervalaverage 0.0.0.9005 (Development)<a class="anchor" aria-label="anchor" href="#intervalaverage-0009005-development"></a></h2>
<ol style="list-style-type: decimal"><li>fixed a bug where the y argument of intervalaverage was not being restored to its original state (row order and removing ordering column rowindex) if there were overlapping intervals in y.</li></ol></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.0.9004" id="intervalaverage-0009004-development">intervalaverage 0.0.0.9004 (Development)<a class="anchor" aria-label="anchor" href="#intervalaverage-0009004-development"></a></h2>
<ol style="list-style-type: decimal"><li>More improvements to the vignette. The final example is now complete (previously it did not actually average the clipped exposures).</li></ol></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.0.9003" id="intervalaverage-0009003-development">intervalaverage 0.0.0.9003 (Development)<a class="anchor" aria-label="anchor" href="#intervalaverage-0009003-development"></a></h2>
<ol style="list-style-type: decimal"><li>More minor improvements in documentation (edits to intro vignette and help files)</li>
<li>Improvements in code to avoid side-effects (ie changes in row order) that were originally implemented in 0.0.0.9001, based on suggestions from <a href="https://github.com/Rdatatable/data.table/issues/4575#issuecomment-650656185" class="external-link uri">https://github.com/Rdatatable/data.table/issues/4575#issuecomment-650656185</a><br></li>
<li>intervalintersect now returns columns in a more sensible order.</li>
</ol></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.0.9002" id="intervalaverage-0009002-development">intervalaverage 0.0.0.9002 (Development)<a class="anchor" aria-label="anchor" href="#intervalaverage-0009002-development"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-0-0-9002">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-0-9002"></a></h3>
<p>1 . Minor improvements in documentation (readme,intro vignette)</p>
</div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.0.0.9001" id="intervalaverage-0009001-development">intervalaverage 0.0.0.9001 (Development)<a class="anchor" aria-label="anchor" href="#intervalaverage-0009001-development"></a></h2>
<div class="section level3">
<h3 id="potentially-breaking-changes-0-0-0-9001">POTENTIALLY BREAKING CHANGES<a class="anchor" aria-label="anchor" href="#potentially-breaking-changes-0-0-0-9001"></a></h3>
<ol style="list-style-type: decimal"><li><p>Interval columns used by <code>intervalaverage</code>, <code>intervalintersect</code>, and <code>isolateoverlaps</code> functions (i.e. those columns of <code>x</code> and <code>y</code> specified by the <code>interval_vars</code> argument in all of those functions) must now be of either class <code>integer</code> or <code>IDate</code>. This is a change from previous where columns of class <code>Date</code> were allowed. <code>Date</code> objects could have hidden decimals which might cause problems in this function which is written to deal with only discrete time. Changing Dates to IDates should fix existing code.</p></li>
<li><p><code>intervalaverage</code> now restores the keys of x and y to their state prior to the function call if x and y are not already keyed on c(group_vars,interval_vars) and prints a message recommending that the keys be set first (to avoid unsetting the key at the end of the function if you don’t care about the order). This is a breaking change only if code relied on <code>intervalaverage</code> changing the key.</p></li>
</ol></div>
<div class="section level3"><h3 id="new-features-0-0-0-9001">NEW FEATURES<a class="anchor" aria-label="anchor" href="#new-features-0-0-0-9001"></a></h3></div>
<div class="section level3">
<h3 id="bug-fixes-0-0-0-9001">BUG FIXES<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-0-9001"></a></h3>
<ol style="list-style-type: decimal"><li><p><code>isolateoverlaps</code> no longer sets the key of x internal to the function as this was never necessary for the foverlaps call to work. This should reduce the possibility of side-effects for this function even though x is still passed by reference. This fixes the problem that the key of x might changed if the function returns an error (the function was already written to restore the key of x if it successfully completed).</p></li>
<li><p>CJ.dt no longer passes-by-references the data.tables provided as arguments in <code>...</code>; While this may add some more memory usage and processing time to copy the table, it really shouldn’t matter since if you don’t have memory to copy a table you don’t have memory to cartesian join it with another table.</p></li>
<li><p><code>is.overlapping</code> now restores the key and column order of x to its original state even if the function returns an error.</p></li>
</ol></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael Young.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

